<link rel="stylesheet" href="/plugins/AsterAnalytics/resource/css/aster-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/css/selectize.bootstrap3.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.4/js/standalone/selectize.min.js"></script>
<div id="main-container">

  <div ng-controller="TeradataController">

    <div class="control-group">
      <label class="control-label">Function Name</label>
      <div class="controls">
        <select ng-model="config.function" ng-options="choice.name for choice in choices track by choice.name">
          <option value="" disabled selected>Select an Aster function...</option>
        </select>
      </div>
    </div>

    <div class="control-group" ng-if="config.function">
      <label class="control-label">Description</label>
      <div class="controls" style="max-width: 30%;">
        {{config.function.description}}
      </div>
    </div>

    <hr ng-if="config.function">

    <div class="control-group" ng-if="config.function">
      <label>Arguments</label>
      <br>
      <table class="table table-bordered table-condensed table-hover">

        <thead> 
          <tr>
            <th>Name</th>
            <!--<th>Required</th>
            <th>Type</th>-->
            <th>Value</th>
          </tr>
        </thead>

        <tbody>

          <tr ng-if="config.function.isOrdered">
            <td>ORDER BY Column</td>
            <td>
              <select ng-model="config.function.orderByColumn">
                <option ng-repeat="column in schema" value="{{ column.name }}">{{ column.name }}</option>
              </select>
            </td>
          </tr>

          <tr ng-if="config.function.partitionInputKind.indexOf('PartitionByKey') !== -1">
            <td>PARTITION BY Column</td>
            <td>
              <select ng-model="config.function.partitionAttributes">
                <option value="ANY">ANY</option>
                <option ng-repeat="column in schema" value="{{ column.name }}">{{ column.name }}</option>
              </select>
            </td>
          </tr>

          <tr ng-repeat="item in config.function.arguments" ng-model="config.function.arguments">
            <td>{{ item.name | lowercase }}</td>
            <!--<td ng-if="item.isRequired" style="color: green; font-weight: bold">Yes</td>
            <td ng-if="!item.isRequired" style="color: grey">No</td>
            <td>{{ item.datatype }}</td>-->
            <td>
              <input type="text" ng-model="item.value" ng-if="item.datatype != 'COLUMNS'"
                data-toggle="tooltip" title="{{ item.desc }}"
                data-placement="right"
              />
              <select ng-if="item.datatype == 'COLUMNS'" 
                ng-model="item.value" data-toggle="tooltip" title="{{ item.desc }}" data-placement="right">
                <option value="" selected>--No Selection--</option>
                <option ng-repeat="column in schema" value="{{ column.name }}">{{ column.name }}</option>
              </select>
            </td>
          </tr>
        </tbody>

      </table>
    </div>

  </div>
</div>